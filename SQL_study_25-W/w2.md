[25-W SQL 스터디] n주차 과제
=========

> 🔍 **1. 과일로 만든 아이스크림 고르기**  
사용 함수: SELECT

문제 링크: [programmers](https://school.programmers.co.kr/learn/courses/30/lessons/133025)

날짜: 25/01/15(수)

### 문제 설명
다음은 아이스크림 가게의 상반기 주문 정보를 담은 FIRST_HALF 테이블과 아이스크림 성분에 대한 정보를 담은 ICECREAM_INFO 테이블입니다. FIRST_HALF 테이블 구조는 다음과 같으며, SHIPMENT_ID, FLAVOR, TOTAL_ORDER 는 각각 아이스크림 공장에서 아이스크림 가게까지의 출하 번호, 아이스크림 맛, 상반기 아이스크림 총주문량을 나타냅니다. FIRST_HALF 테이블의 기본 키는 FLAVOR입니다.

ICECREAM_INFO 테이블 구조는 다음과 같으며, FLAVOR, INGREDITENT_TYPE 은 각각 아이스크림 맛, 아이스크림의 성분 타입을 나타냅니다. INGREDIENT_TYPE에는 아이스크림의 주 성분이 설탕이면 sugar_based라고 입력되고, 아이스크림의 주 성분이 과일이면 fruit_based라고 입력됩니다. ICECREAM_INFO의 기본 키는 FLAVOR입니다. ICECREAM_INFO테이블의 FLAVOR는 FIRST_HALF 테이블의 FLAVOR의 외래 키입니다.

### 문제
상반기 아이스크림 총주문량이 3,000보다 높으면서 아이스크림의 주 성분이 과일인 아이스크림의 맛을 총주문량이 큰 순서대로 조회하는 SQL 문을 작성해주세요.

### SQL 쿼리(정답)
```SQL
SELECT 
    F.FLAVOR
FROM FIRST_HALF AS F
    LEFT JOIN ICECREAM_INFO AS I
    ON I.FLAVOR = F.FLAVOR
WHERE TOTAL_ORDER >= 3000 AND INGREDIENT_TYPE = 'fruit_based'
ORDER BY TOTAL_ORDER DESC
```
### 실행 결과(정답)
```SQL
FLAVOR
----------
strawberry
```

### 풀이 과정 및 고민한 점
```SQL
1. 두 테이블 JOIN. 주문 정보가 주요 정보이므로 FIRST_HALF에 ICECREAM_INFO를 LEFT JOIN함.

SELECT 
    *
FROM FIRST_HALF AS F
    LEFT JOIN ICECREAM_INFO AS I
    ON I.FLAVOR = F.FLAVOR

2. '총주문량이 3,000보다 높으면서 아이스크림의 주 성분이 과일인 아이스크림의 맛' -> WHERE 절에서 AND로 두 조건을 연결

SELECT 
    *
FROM FIRST_HALF AS F
    LEFT JOIN ICECREAM_INFO AS I
    ON I.FLAVOR = F.FLAVOR
WHERE TOTAL_ORDER >= 3000 AND INGREDIENT_TYPE = 'fruit_based'

3. TOTAL_ORDER 내림차순 정렬, FLAVOR만 출력

SELECT 
    F.FLAVOR
FROM FIRST_HALF AS F
    LEFT JOIN ICECREAM_INFO AS I
    ON I.FLAVOR = F.FLAVOR
WHERE TOTAL_ORDER >= 3000 AND INGREDIENT_TYPE = 'fruit_based'
ORDER BY TOTAL_ORDER DESC

```
- JOIN을 간만에 보았다
- JOIN한 테이블을 SELECT문에 넣을 때 테이블을 지정하지 않으면 다음과 같은 오류 발생: 'Column 'FLAVOR' in field list is ambiguous'. 테이블명을 명시하자.

---

> 🔍 **2. 자동차 종류 별 특정 옵션이 포함된 자동차 수 구하기**  
사용 함수: GROUP BY

문제 링크: [programmers](https://school.programmers.co.kr/learn/courses/30/lessons/151137)

날짜: 25/01/15(수)


### 문제 설명
다음은 어느 자동차 대여 회사에서 대여중인 자동차들의 정보를 담은 CAR_RENTAL_COMPANY_CAR 테이블입니다. CAR_RENTAL_COMPANY_CAR 테이블은 아래와 같은 구조로 되어있으며, CAR_ID, CAR_TYPE, DAILY_FEE, OPTIONS 는 각각 자동차 ID, 자동차 종류, 일일 대여 요금(원), 자동차 옵션 리스트를 나타냅니다.

자동차 종류는 '세단', 'SUV', '승합차', '트럭', '리무진' 이 있습니다. 자동차 옵션 리스트는 콤마(',')로 구분된 키워드 리스트(옵션 리스트 값 예시: '열선시트', '스마트키', '주차감지센서')로 되어있으며, 키워드 종류는 '주차감지센서', '스마트키', '네비게이션', '통풍시트', '열선시트', '후방카메라', '가죽시트' 가 있습니다.

### 문제

CAR_RENTAL_COMPANY_CAR 테이블에서 '통풍시트', '열선시트', '가죽시트' 중 하나 이상의 옵션이 포함된 자동차가 자동차 종류 별로 몇 대인지 출력하는 SQL문을 작성해주세요. 이때 자동차 수에 대한 컬럼명은 CARS로 지정하고, 결과는 자동차 종류를 기준으로 오름차순 정렬해주세요.

### SQL 쿼리(정답)
```SQL
1. LIKE: 쉬우나 비효율적

SELECT 
    CAR_TYPE,
    COUNT(CAR_ID) AS CARS
FROM CAR_RENTAL_COMPANY_CAR
WHERE OPTIONS LIKE '%통풍시트%' 
    OR OPTIONS LIKE '%열선시트%' 
    OR OPTIONS LIKE '%가죽시트%' 
GROUP BY CAR_TYPE
ORDER BY CAR_TYPE

2. REGEXP: 가독성을 챙김

SELECT 
    CAR_TYPE,
    COUNT(CAR_ID) AS CARS
FROM CAR_RENTAL_COMPANY_CAR 
WHERE OPTIONS REGEXP '(통풍시트|열선시트|가죽시트)'
GROUP BY CAR_TYPE
ORDER BY CAR_TYPE
```
### 실행 결과(정답)
```SQL
CAR_TYPE	CARS
----------------
SUV	        6
리무진	    2
세단	    6
승합차	    3
트럭	    3
```

### 풀이 과정 및 고민한 점
```SQL
1. '통풍시트', '열선시트', '가죽시트' 중 하나만 포함되어도 출력되도록 함.
LIKE문을 OR로 연결하는 것보다 쉬운 방법이 있는지 찾아봄. (=REGEXP)

SELECT 
    *
FROM CAR_RENTAL_COMPANY_CAR 
WHERE OPTIONS REGEXP '(통풍시트|열선시트|가죽시트)'

2. CAR_TYPE별 COUNT를 출력해야 하므로 GROUP BY 사용, SELECT문에 COUNT 함수 사용

SELECT 
    CAR_TYPE,
    COUNT(CAR_ID) AS CARS
FROM CAR_RENTAL_COMPANY_CAR 
WHERE OPTIONS REGEXP '(통풍시트|열선시트|가죽시트)'
GROUP BY CAR_TYPE

3. CAR_TYPE 오름차순 정렬

SELECT 
    CAR_TYPE,
    COUNT(CAR_ID) AS CARS
FROM CAR_RENTAL_COMPANY_CAR 
WHERE OPTIONS REGEXP '(통풍시트|열선시트|가죽시트)'
GROUP BY CAR_TYPE
ORDER BY CAR_TYPE
```
- **MySQL REGEXP 사용 방법: 여러 개의 특정 문자를 동시에 검색하고 싶을 때**  
WHERE 조건식에 특정 문자들이 검색될 열 입력, REGEXP('검색문자1|검색문자2|...')  
(따옴표는 어디에 넣어도 되는 것 같다)
---

> 🔍 **3. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: YY/MM/DD()

### 문제 설명


### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```


---

> 🔍 **4. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: YY/MM/DD()


### 문제 설명


### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```

---

> 🔍 **5. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: YY/MM/DD()

### 문제 설명


### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```
