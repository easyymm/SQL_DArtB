[25-W SQL 스터디] n주차 과제
=========
## 목차

|번호|문제|
|---|-----| 
|1| [서울에 위치한 식당 목록 출력하기](#문제1)  |
|2| [저자 별 카테고리 별 매출액 집계하기](#문제2)  |
|3| [년, 월, 성별 별 상품 구매 회원 수 구하기](#문제3)  |  
|4| [우유와 요거트가 담긴 장바구니](#문제4)  |  
|5| [주문량이 많은 아이스크림들 조회하기](#문제5) | 
|6| [연간 평가점수에 해당하는 평가 등급 및 성과금 조회하기](#문제6) | 
|7| [그룹별 조건에 맞는 식당 목록 출력하기](#문제7) | 
|8| [상품을 구매한 회원 비율 구하기](#문제8) | 
|9| [](#문제9) | 
---

## 문제1
> 🔍 **1. 서울에 위치한 식당 목록 출력하기**  
사용 함수: SELECT

문제 링크: [programmers](https://school.programmers.co.kr/learn/courses/30/lessons/131118)

날짜: 25/02/13(목)



### 문제
REST_INFO와 REST_REVIEW 테이블에서 서울에 위치한 식당들의 식당 ID, 식당 이름, 음식 종류, 즐겨찾기수, 주소, 리뷰 평균 점수를 조회하는 SQL문을 작성해주세요. 이때 리뷰 평균점수는 소수점 세 번째 자리에서 반올림 해주시고 결과는 평균점수를 기준으로 내림차순 정렬해주시고, 평균점수가 같다면 즐겨찾기수를 기준으로 내림차순 정렬해주세요.

### SQL 쿼리(정답)
```SQL
SELECT
    REST_ID,
    REST_NAME,
    FOOD_TYPE,
    FAVORITES,
    ADDRESS,
    ROUND(AVG(REVIEW_SCORE),2) AS SCORE
FROM REST_INFO AS I
JOIN REST_REVIEW AS R
USING (REST_ID)
WHERE ADDRESS REGEXP '^서울' 
GROUP BY REST_ID
ORDER BY SCORE DESC, FAVORITES DESC
```
### 실행 결과(정답)
```SQL
REST_ID	REST_NAME	FOOD_TYPE	FAVORITES	ADDRESS	          SCORE
----------------------------------------------------------------------
00001	은돼지식당	한식	734	서울특별시 중구 다산로 149	    5.00
00002	하이가쯔네	일식	112	서울시 중구 신당동 375-21	    4.50
00004	스시사카우스	일식	230	서울시 강남구 신사동 627-27      4.29
00003	따띠따띠뜨	양식	102	서울시 강남구 신사동 627-3 1F	4.00
```

### 풀이 과정 및 고민한 점
```SQL
1. 두 테이블 조인

FROM REST_INFO AS I
JOIN REST_REVIEW AS R
USING (REST_ID)

2. 정규표현식으로 '서울'이 들어간 주소 찾기-서울로 시작해야 채점 테이블에서 문제 없음

WHERE ADDRESS REGEXP '^서울' 

3. REST_ID로 그룹바이, 리뷰 평균점수 계산

SELECT
    REST_ID,
    REST_NAME,
    FOOD_TYPE,
    FAVORITES,
    ADDRESS,
    ROUND(AVG(REVIEW_SCORE),2) AS SCORE
FROM REST_INFO AS I
JOIN REST_REVIEW AS R
USING (REST_ID)
WHERE ADDRESS REGEXP '^서울' 
GROUP BY REST_ID
ORDER BY SCORE DESC, FAVORITES DESC
```
### ✏️ 정규표현식 메타문자

| **메타문자** | **설명**                          | **예시**                                     | **예시 결과**                                  |
|--------------|-----------------------------------|---------------------------------------------|-------------------------------------------|
| `^`          | 문자열의 시작                     | `^hello`                                    | `hello`로 시작하는 문자열                  |
| `$`          | 문자열의 끝                       | `world$`                                    | `world`로 끝나는 문자열                   |
| `.`          | 임의의 한 문자                    | `a.c`                                       | `abc`, `adc`와 매칭                       |
| `*`          | 0번 이상 반복                    | `ab*c`                                     | `ac`, `abc`, `abbc`와 매칭                |
| `+`          | 1번 이상 반복                    | `ab+c`                                     | `abc`, `abbc`와 매칭 (`ac`는 제외)        |
| `?`          | 0번 또는 1번 반복                 | `ab?c`                                     | `ac`, `abc`와 매칭                        |
| `{n,m}`      | n번 이상, m번 이하 반복           | `a{2,4}`                                   | `aa`, `aaa`, `aaaa`와 매칭                |
| `[abc]`      | `a`, `b`, `c` 중 하나와 매칭      | `[aeiou]`                                  | 모음 문자와 매칭                          |
| `[^abc]`     | `a`, `b`, `c`를 제외한 문자 매칭  | `[^aeiou]`                                 | 자음 문자와 매칭                          |
| `\d`         | 숫자                              | `\d+`                                     | 숫자로만 이루어진 문자열                   |
| `\s`         | 공백 문자                         | `\s+`                                     | 공백 문자와 매칭                          |
| `\w`         | 단어 문자                         | `\w+`                                     | 알파벳, 숫자, `_`와 매칭                  |
| `\|`   | OR 조건  | `cat\|dog`      | `cat` 또는 `dog`와 매칭  |


---
## 문제2
> 🔍 **2. 저자 별 카테고리 별 매출액 집계하기**  
사용 함수: 

문제 링크: [programmers](https://school.programmers.co.kr/learn/courses/30/lessons/144856)

날짜: 25/02/13(목)




### 문제
2022년 1월의 도서 판매 데이터를 기준으로 저자 별, 카테고리 별 매출액(TOTAL_SALES = 판매량 * 판매가) 을 구하여, 저자 ID(AUTHOR_ID), 저자명(AUTHOR_NAME), 카테고리(CATEGORY), 매출액(SALES) 리스트를 출력하는 SQL문을 작성해주세요.
결과는 저자 ID를 오름차순으로, 저자 ID가 같다면 카테고리를 내림차순 정렬해주세요.

### SQL 쿼리(정답)
```SQL
SELECT
    B.AUTHOR_ID,
    AUTHOR_NAME,
    CATEGORY,
    SUM(PRICE * SALES) AS TOTAL_SALES
FROM BOOK AS B
JOIN AUTHOR AS A
ON B.AUTHOR_ID = A.AUTHOR_ID
JOIN BOOK_SALES AS S
ON B.BOOK_ID = S.BOOK_ID
WHERE EXTRACT(YEAR_MONTH FROM SALES_DATE) = 202201
GROUP BY AUTHOR_ID, CATEGORY
ORDER BY AUTHOR_ID, CATEGORY DESC
```
### 실행 결과(정답)
```SQL
AUTHOR_ID	AUTHOR_NAME	CATEGORY	TOTAL_SALES
1	홍길동	인문	561000
1	홍길동	경제	1107000
.
.
.
```

### 풀이 과정 및 고민한 점
```SQL
1. 세 테이블 조인

FROM BOOK AS B
JOIN AUTHOR AS A
ON B.AUTHOR_ID = A.AUTHOR_ID
JOIN BOOK_SALES AS S
ON B.BOOK_ID = S.BOOK_ID

2. 2022년 1월만 추출

WHERE EXTRACT(YEAR_MONTH FROM SALES_DATE) = 202201

3. TOTAL_SALES 정의

SUM(PRICE * SALES) 
```

---
## 문제3
> 🔍 **3. 년, 월, 성별 별 상품 구매 회원 수 구하기**  
사용 함수: 

문제 링크: [programmers](https://school.programmers.co.kr/learn/courses/30/lessons/131532)

날짜: 25/02/13(목)



### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```



---
## 문제4
> 🔍 **4. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/13(목)




### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```

---
## 문제5
> 🔍 **5. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/13(목)



### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```


---
## 문제6
> 🔍 **6. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/14(금)



### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```

---
## 문제7
> 🔍 **7. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/14(금)




### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```

---
## 문제8
> 🔍 **8. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/14(금)



### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```



---
## 문제9
> 🔍 **9. 문제**  
사용 함수: 

문제 링크: [programmers](문제 링크)

날짜: 25/02/14(금)




### 문제


### SQL 쿼리(정답)
```SQL

```
### 실행 결과(정답)
```SQL

```

### 풀이 과정 및 고민한 점
```SQL

```
